package pages

import "github.com/vovanwin/template/internal/controller/ui/layouts"

templ NotificationsDemoPage(csrfToken string) {
	@layouts.AuthedLayout("–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Äî –î–µ–º–æ", "/notifications-demo", NotificationsDemoContent(csrfToken), csrfToken)
}

templ NotificationsDemoContent(csrfToken string) {
	<div class="space-y-6">
		<div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
			<h2 class="text-lg font-semibold text-gray-800 mb-2">Realtime-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Centrifugo</h2>
			<p class="text-gray-500 text-sm mb-4">
				–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Äî –±—ç–∫–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Å–æ–±—ã—Ç–∏–µ –≤ Centrifugo, –∏ –æ–Ω–æ –ø—Ä–∏–¥—ë—Ç –≤–∞–º —á–µ—Ä–µ–∑ SSE –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
				–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É.
			</p>
		</div>

		<!-- –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
			@demoCard("success", "–£—Å–ø–µ—Ö", "–û–ø–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!", "bg-green-500", "bg-green-50 border-green-200", csrfToken)
			@demoCard("info", "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", "–ù–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ.", "bg-blue-500", "bg-blue-50 border-blue-200", csrfToken)
			@demoCard("warning", "–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ", "–ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è.", "bg-yellow-500", "bg-yellow-50 border-yellow-200", csrfToken)
			@demoCard("error", "–û—à–∏–±–∫–∞", "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.", "bg-red-500", "bg-red-50 border-red-200", csrfToken)
			@demoCard("reminder", "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ", "–ß–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç –≤—Å—Ç—Ä–µ—á–∞ —Å –∫–æ–º–∞–Ω–¥–æ–π.", "bg-purple-500", "bg-purple-50 border-purple-200", csrfToken)
			@demoCard("custom", "–ö–∞—Å—Ç–æ–º–Ω–æ–µ", "–ü—Ä–∏–≤–µ—Ç –∏–∑ Centrifugo! üöÄ", "bg-indigo-500", "bg-indigo-50 border-indigo-200", csrfToken)
		</div>

		<!-- –ë—ã—Å—Ç—Ä–∞—è —Å–µ—Ä–∏—è -->
		<div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
			<h3 class="text-md font-semibold text-gray-800 mb-3">–°–µ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h3>
			<p class="text-gray-500 text-sm mb-4">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–¥—Ä—è–¥ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π.</p>
			<button
				hx-post="/api/v1/notifications-demo/burst"
				hx-headers={ `{"X-CSRF-Token":"` + csrfToken + `"}` }
				hx-swap="none"
				class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white rounded-lg font-medium hover:from-indigo-600 hover:to-purple-700 transition-all shadow-md hover:shadow-lg"
			>
				–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–µ—Ä–∏—é (5 —à—Ç.)
			</button>
		</div>

		<!-- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ -->
		<div class="bg-white rounded-xl shadow-sm p-6 border border-gray-200">
			<h3 class="text-md font-semibold text-gray-800 mb-3">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
			<div class="bg-gray-900 rounded-lg p-4 text-sm font-mono text-gray-300 overflow-x-auto">
				<pre>Browser ‚îÄ‚îÄEventSource (uni_sse)‚îÄ‚îÄ‚Üí Centrifugo ‚Üê‚îÄ‚îÄ HTTP API ‚îÄ‚îÄ Go Backend
                                        ‚îÇ
                                   JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
                                   personal#&lt;userID&gt;</pre>
			</div>
			<div class="mt-4 space-y-2 text-sm text-gray-600">
				<p><span class="font-medium text-gray-800">1.</span> –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ <code class="bg-gray-100 px-1.5 py-0.5 rounded text-xs">/api/v1/centrifugo/token</code></p>
				<p><span class="font-medium text-gray-800">2.</span> –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Centrifugo —á–µ—Ä–µ–∑ <code class="bg-gray-100 px-1.5 py-0.5 rounded text-xs">EventSource</code> (uni_sse)</p>
				<p><span class="font-medium text-gray-800">3.</span> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª <code class="bg-gray-100 px-1.5 py-0.5 rounded text-xs">#userID</code></p>
				<p><span class="font-medium text-gray-800">4.</span> –ë—ç–∫–µ–Ω–¥ –ø—É–±–ª–∏–∫—É–µ—Ç —á–µ—Ä–µ–∑ <code class="bg-gray-100 px-1.5 py-0.5 rounded text-xs">POST /api/publish</code> ‚Üí Centrifugo –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É</p>
			</div>
		</div>
	</div>
}

templ demoCard(notifType, title, message, btnColor, cardColor, csrfToken string) {
	<div class={ "rounded-xl shadow-sm p-5 border", cardColor }>
		<h3 class="font-semibold text-gray-800 mb-2">{ title }</h3>
		<p class="text-gray-600 text-sm mb-4">{ message }</p>
		<button
			hx-post="/api/v1/notifications-demo/send"
			hx-vals={ `{"type":"` + notifType + `","message":"` + message + `"}` }
			hx-headers={ `{"X-CSRF-Token":"` + csrfToken + `"}` }
			hx-swap="none"
			class={ "px-4 py-2 text-white rounded-lg text-sm font-medium hover:opacity-90 transition-opacity", btnColor }
		>
			–û—Ç–ø—Ä–∞–≤–∏—Ç—å
		</button>
	</div>
}
