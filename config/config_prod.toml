# Настройки HTTP/gRPC сервера
[server]
# Хост сервера
host = "0.0.0.0"
# Основной порт приложения
port = "7001"
# Окружение: local, dev, prod
env = "prod"
# Порт HTTP сервера
http_port = "7001"
# Порт gRPC сервера
grpc_port = "7000"
# Порт debug/pprof
debug_port = "7003"
# Порт Swagger UI
swagger_port = "7002"
# Разрешить обход авторизации (только для локальной разработки)
auth_bypass = false
# Ключ для CSRF защиты (32 байта для продакшена)
csrf_key = "change-me-in-production-env-32bt"

# Уровень логирования: DEBUG, INFO, WARN, ERROR
[log]
level = "INFO"
# Формат вывода: text=false , json = true
format = false
# Включить отправку логов в Loki
loki_enabled = true
# URL Loki push API
loki_url = "http://loki:3100/loki/api/v1/push"
# Переопределения для компонентов.
overrides = { "temporal" = "INFO", "telegram" = "DEBUG", "db" = "DEBUG", "api" = "WARN", "ui" = "DEBUG", "bot:reminder" = "DEBUG" }

# Переключатели функций
[metrics]
# Включить сбор метрик
enable_metrics = true

# Подключение к PostgreSQL
[PG]
# Хост базы данных
host = "postgres"
# Порт базы данных
port = "5432"
# Пользователь БД
user = "app"
# Пароль БД
password = "change-me-in-env"
# Схема БД
scheme = "public"
# Имя базы данных
db = "template"

# Подключение к RabbitMQ
[rabbit]
# AMQP URI для подключения к RabbitMQ
amqp_url = "amqp://app:change-me-in-env@rabbitmq:5672"

# Настройки JWT аутентификации
[JWT]
# Секретный ключ подписи токенов
sign_key = "change-me-in-env"
# Время жизни access токена
token_ttl = "15m"
# Время жизни refresh токена
refresh_token_ttl = "720h"

# Настройки OpenTelemetry
[otel]
# Адрес OTEL Collector (gRPC)
endpoint = "otel-collector:4317"
# Процент трейсов для сохранения (0.0–1.0)
sample_rate = 0.1

# Настройки etcd для feature flags
[etcd]
# Адреса etcd серверов
endpoints = "etcd:2379"
# Префикс ключей флагов
prefix = "/flags/"

# Настройки Temporal
[temporal]
# Хост Temporal сервера
host = "temporal"
# Порт Temporal сервера
port = 7233
# Пространство имён
namespace = "default"
# Очередь задач
task_queue = "default-task-queue"

# Настройки Centrifugo
[centrifugo]
# HTTP адрес Centrifugo API
addr = "http://localhost:8000"
# API ключ для Server API
api_key = "centrifugo-api-key"
# HMAC секрет для генерации JWT токенов клиентов
token_secret = "centrifugo-token-secret"
# Время жизни клиентского токена
token_ttl = "60m"

# Настройки Telegram бота
[telegram]
# Токен бота от @BotFather
token = ""
# URL для вебхука (пусто = long polling для локальной разработки)
webhook_url = ""
# URL Mini App (WebApp) для открытия в Telegram WebView
miniapp_url = ""
